TARGET_DIR="$BUILD_DIR/tmp/libtorch"
mkdir -p $TARGET_DIR
echo "-----> Downloading LibTorch from $LIBTORCH_URL..."
curl -L $LIBTORCH_URL -o $TARGET_DIR/$LIBTORCH_ZIP
echo "-----> Extracting LibTorch..."
unzip -q $TARGET_DIR/$LIBTORCH_ZIP -d $TARGET_DIR
rm $TARGET_DIR/$LIBTORCH_ZIP

# Adjust this if the archive extracts to a folder with a different name.
LIBTORCH_PATH="$TARGET_DIR/libtorch"

mkdir -p $BUILD_DIR/.profile.d
echo "export TORCH_DIR=$LIBTORCH_PATH" > $BUILD_DIR/.profile.d/libtorch.sh

echo "-----> LibTorch installed at $LIBTORCH_PATH"
exit 0
